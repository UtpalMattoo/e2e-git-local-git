# üîê GCP IAM Overview ‚Äì Bootstrap / Initial Dev Project

This document outlines the key service accounts (SAs) used in the initial development GCP project environment, along with their roles and security considerations.

---

## üì¶ Service Accounts

### 1. `dev-compute@<project>.iam.gserviceaccount.com`  
**(Default Compute Engine Service Account)**  
- **Purpose**: Auto-generated by GCP and attached to Compute Engine VMs by default.
- **Explanation**: Provides default permissions for VMs, often broader than necessary.  
- **Roles**:
  - `Editor` (‚ö†Ô∏è Too permissive)

> üõ°Ô∏è **Security Note**: Replace this with a custom SA for production workloads. Remove `Editor` role if unused.

---

### 2. `cicd-runner@<project>.iam.gserviceaccount.com`  
**(CI/CD Runner ‚Äì Terraform-Created)**  
- **Purpose**: Used in automated pipelines (e.g., Terraform, Cloud Build) for deploying infrastructure and applications.
- **Explanation**: Has just enough permissions to support builds, deployments, logging, and AI model interaction.
- **Roles**:
  - `Artifact Registry Writer`
  - `Cloud Build Service Account`
  - `Cloud Run Invoker`
  - `Discovery Engine Editor`
  - `Logs Writer`
  - `Storage Admin`
  - `Vertex AI User`

> üõ°Ô∏è **Security Note**: Scope tightly to only the services it interacts with. Avoid using it for interactive/local development.

---

### 3. `local-vscode-gcp-auth@<project>.iam.gserviceaccount.com`  
**(VS Code Bootstrap Auth Service Account ‚Äì Manually Created)**  
- **Purpose**: Used to authenticate the local developer environment (e.g., VS Code) with GCP.
- **Explanation**: Created manually to initiate the first `terraform apply`, as Terraform requires a valid authenticated identity to begin.
- **Roles**:
  - `Cloud Build Editor`
  - `Cloud Trace Agent`
  - `Logs Writer`
  - `Owner` (‚ö†Ô∏è Too permissive)
  - `Vertex AI Administrator`
  - `Vertex AI User`
  - `Viewer`

> üõ°Ô∏è **Security Note**: Limit this SA to only the roles needed for infrastructure provisioning. Rotate its keys and avoid long-lived usage.

---

### 4. `<account-email>`  
**(Developer Account Owner)**  
- **Purpose**: User who initially created the project and runs administrative operations.
- **Explanation**: This is a human identity used to manage IAM, billing, and manual intervention during early development.
- **Roles**:
  - `Owner`

> üõ°Ô∏è **Security Note**: Do not use this account in production automation. Enable 2FA and use service accounts for operational tasks.

---

## ‚úÖ Summary of IAM Best Practices for Bootstrap Project

| Practice                                   | Status | Recommendation                                                                 |
|--------------------------------------------|--------|--------------------------------------------------------------------------------|
| Use separate SAs for CI/CD and local dev   | ‚úÖ     | Clear separation between auth (`local-vscode-gcp-auth`) and deploy (`cicd-runner`) |
| Avoid broad roles like `Owner` or `Editor` | ‚ö†Ô∏è     | Local and default SAs should be scoped down post-bootstrap                     |
| Avoid default compute SA for production    | ‚ùå     | Create and assign least-privilege custom SAs to workloads                      |
| Use user identity only for project setup   | ‚úÖ     | Shift to automation through SAs after initial provisioning                     |

## ‚úÖ Source

 LLM generated documentation based on my prompts from general curiosity, experience deploying and troubleshooting the application.
 Helped clear up and organize environments, accounts, roles and good practices around cloud infra setup
